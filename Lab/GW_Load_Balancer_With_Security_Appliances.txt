🧱 1. Create the VPCs and Subnets
🔹 Service Consumer VPC
	CIDR: 192.168.0.0/24
	Subnets:
		GWLBE Subnet: 192.168.0.0/25
		App Subnet: 192.168.0.128/25

🔹 Service Provider VPC
	CIDR: 192.168.1.0/24
	Subnet:
		Firewall Subnet: 192.168.1.0/24

🚀 2. Launch Security Appliance EC2 Instances (in Service Provider VPC)
Repeat the following steps twice for Security Appliance-1 and Security Appliance-2:

	Steps:
	Go to EC2 Dashboard
	Click Launch Instance
	Under AMI, click Browse more AMIs
	Paste your custom AMI ID:
		ami-0afe2e9532012d300
	Select instance type: t2.micro (or as needed)
	Configure instance:
	Network: Service Provider VPC
	Subnet: Firewall Subnet (192.168.1.0/24)
	Auto-assign Public IP: Enabled
	Select a key pair
	Configure Security Group:
	Inbound:
	UDP 6081 (GENEVE)
	SSH (22)
	ICMP (optional)
	Outbound: Allow all
	Launch the instance

🛠 3. Run GWLBTun on Each Security Appliance
SSH into each appliance instance and run the following:

	Commands:
		sudo -i
		cd aws-gateway-load-balancer-tunnel-handler/
		./gwlbtun -c example-scripts/create-passthrough.sh -p 80 &
✅ This enables the appliance to process HTTP traffic from the Gateway Load Balancer.

⚙️ 4. Create Gateway Load Balancer (GWLB)
	Go to EC2 > Load Balancers
	Choose Create Load Balancer → Gateway Load Balancer
		Configure:
		VPC: Service Provider VPC
		Subnet: Firewall Subnet
		Attach to Target Group with the two appliances

🎯 5. Create Target Group
	Type: Instance
	Protocol: GENEVE
	VPC: Service Provider VPC
	Add both EC2 appliance instances

🔁 6. Create Gateway Load Balancer Endpoint (GWLBE)
	Go to VPC > Endpoints > Create Endpoint
	Select Type: Gateway Load Balancer
	Service: Choose the GWLB shared from Service Provider VPC
	VPC: Service Consumer VPC
	Subnet: GWLBE Subnet (192.168.0.0/25)

💻 7. Launch App EC2 Instances (in Service Consumer VPC)
	Repeat the following steps for Server-1 and Server-2:
	Launch 2 EC2 Instances
	AMI: Any Amazon Linux or Ubuntu
	Network: Service Consumer VPC
	Subnet: App Subnet (192.168.0.128/25)
	Public IP: Enabled
	Security Group:
	Inbound: SSH, HTTP
	Outbound: Allow all
	
	User data to be used as following for both the instances.
		#!/bin/bash
		yum install -y httpd
		systemctl start httpd
		LOCAL_IP=$(curl -s http://169.254.169.254/latest/meta-data/local-ipv4)
		echo "<h1>Local IP: $LOCAL_IP</h1>" > /var/www/html/index.html

🗺 8. Configure Route Tables
	🔹 GWLBE Subnet Route Table
	192.168.0.0/24 → Local
	0.0.0.0/0 → Internet Gateway

	🔹 App Subnet Route Table
		192.168.0.0/24 → Local
		0.0.0.0/0 → GWLBE

	🔹 Firewall Subnet Route Table (Provider VPC)
		192.168.1.0/24 → Local
		0.0.0.0/0 → Internet Gateway

🔐 9. Validate the Setup
	On Security Appliances:
	sudo tcpdump -i eth0 udp port 6081
	You should see traffic arriving from GWLB.

	From App Server:
	curl http://example.com
	The traffic should be intercepted by the appliance and passed through